"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4227],{4227:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var a=n(7757),i=n.n(a),s=n(9669),o=n.n(s),r=n(629),l=n(8764),c=n.n(l);function u(t,e,n,a,i,s,o){try{var r=t[s](o),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(a,i)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var s=t.apply(e,n);function o(t){u(s,a,i,o,r,"next",t)}function r(t){u(s,a,i,o,r,"throw",t)}o(void 0)}))}}const d={data:function(){return{informations:"",loading:!1,title:"",content:"",lang:"",display_page:"",date:""}},methods:{getInformations:function(t){var e=this;return v(i().mark((function n(){var a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o().get("/api/get/new_informations/"+t+"/"+e.user.role+"/all");case 3:a=n.sent,e.informations=a.data,n.next=13;break;case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,o().get("/api/get/new_informations/"+t+"/notLogin/all");case 11:a=n.sent,e.informations=a.data;case 13:case"end":return n.stop()}}),n,null,[[0,7]])})))()},new_information_post:function(){var t=this;return v(i().mark((function e(){var n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,o().post("/api/new_information/create",{user_id:t.userid,lang_page:t.lang,display_page:t.display_page,date:t.date,title:t.title,content:t.content});case 3:n=e.sent,a=n.data,t.loading=!1,a?c().fire({icon:"success",title:t.$t("successTitle"),text:t.$t("successText"),reverseButtons:!0,confirmButtonText:t.$t("ok"),cancelButtonText:t.$t("cancel")}).then((function(){t.$router.push({name:"jp"})})):c().fire({icon:"warning",title:t.$t("warningTitle"),text:t.$t("warningText"),reverseButtons:!0,confirmButtonText:t.$t("ok"),cancelButtonText:t.$t("cancel")});case 7:case"end":return e.stop()}}),e)})))()}},computed:(0,r.Se)({user:"auth/user"}),created:function(){this.getInformations("jp"),this.userid=this.user.id},mounted:function(){this.userid=this.user.id}};const m=(0,n(1900).Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"header"},[n("h1",[t._v(t._s(t.$t("informations.title")))])]),t._v(" "),n("div",{staticClass:"container content"},["0"==t.informations.length?n("div",{staticClass:"no_datas"},[n("h5",[t._v("新しい情報はありません")])]):n("div",{staticClass:"datas row"},t._l(t.informations,(function(e){return n("div",{key:e.id,staticClass:"pannels col-md-3 col-sm-12"},[n("div",{staticClass:"pannel"},[n("div",{staticClass:"info_title"},[n("h4",[n("router-link",{attrs:{to:{name:"information_detail_jp",query:{id:e.id,author:e.nikename?e.nikename:e.name}}}},[t._v("\n                                "+t._s(null!=e.title&&e.title.length>80?e.title.slice(0,80)+"...":e.title)+"\n                            ")])],1)]),t._v(" "),n("div",{staticClass:"info_date"},[n("h6",[t._v(t._s(e.created_at))]),n("br"),t._v(" "),n("h6",[t._v("著者: "),n("a",{attrs:{href:"#"}},[n("i",[t._v(t._s(e.nikename?e.nikename:e.name))])])])]),t._v(" "),n("div",{staticClass:"info_content"},[n("h5",[t._v(t._s(null!=e.content&&e.content.length>120?e.content.slice(0,120)+"...":e.content))])]),t._v(" "),n("div",{staticClass:"info_readmore"},[n("h6",[n("router-link",{attrs:{to:{name:"information_detail_jp",query:{id:e.id,author:e.nikename?e.nikename:e.name}}}},[t._v("\n                                詳細を読む\n                            ")])],1)])])])})),0),t._v(" "),t.user&&"admin"==t.user.role?n("div",{staticClass:"info_post_content"},[n("div",{staticClass:"new_info_form"},[t._m(0),t._v(" "),n("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.new_information_post.apply(null,arguments)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userid,expression:"userid"}],attrs:{type:"hidden",name:"userid"},domProps:{value:t.userid},on:{input:function(e){e.target.composing||(t.userid=e.target.value)}}}),t._v(" "),n("div",{staticClass:"mb-3 row"},[n("div",{staticClass:"col-md-4"},[n("label",{staticClass:"col-form-label"},[t._v("情報の言語を選択してください")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.lang,expression:"lang"}],staticClass:"form-control",attrs:{name:"lang"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.lang=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"en"}},[t._v("英語")]),t._v(" "),n("option",{attrs:{value:"jp"}},[t._v("日本語")])])]),t._v(" "),n("div",{staticClass:"col-md-4"},[n("label",{staticClass:"col-form-label"},[t._v("ホームページを選択してください")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.display_page,expression:"display_page"}],staticClass:"form-control",attrs:{name:"display_page"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.display_page=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"top"}},[t._v("ホーム")]),t._v(" "),n("option",{attrs:{value:"customer"}},[t._v("お客様")]),t._v(" "),n("option",{attrs:{value:"dealer"}},[t._v("ディーラー")])])]),t._v(" "),n("div",{staticClass:"col-md-4"},[n("label",{staticClass:"col-form-label"},[t._v("日にち")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date",name:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"mb-3 row"},[n("div",{staticClass:"col-md-12"},[n("label",{staticClass:"col-form-label"},[t._v("タイトル")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"title",name:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"mb-3 row"},[n("div",{staticClass:"col-md-12"},[n("label",{staticClass:"col-form-label"},[t._v("コンテンツ")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",attrs:{type:"text",name:"content"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"mb-3 row"},[n("div",{staticClass:"col-md-12 d-flex"},[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.loading}},[n("b-spinner",{attrs:{small:"",hidden:!t.loading}}),t._v("\n                                新しい情報を作成する\n                            ")],1)],1)])])])]):t.user?t._e():n("div",{staticClass:"info_post_content"},[n("h5",[t._v("新しい情報を編集するには、"),n("router-link",{attrs:{to:{name:"login"}}},[t._v(t._s(t.$t("login")))]),t._v(".")],1)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-title"},[n("h4",[t._v("情報詳細フィールドに入力してください。")])])}],!1,null,"97350a68",null).exports}}]);